<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>NanoNaut - THE GAME</title>
        
        <!-- Use debug variant of phaser for now. -->
        <script src="cdn.jsdelivr.net/phaser/2.6.2/phaser.js"></script>
    </head>
    
    <body id="GAME">
        <script type="text/javascript">
            var GAME = new Phaser.Game(1280, 720, Phaser.AUTO, "GAME", {preload: preload, create: create, update: update, render: render})
            
            // REFACTOR: Pull out State Object
            var player;
            var background;
            function preload() {
                GAME.load.image("SHIP", "assets/SpaceShip.png")
                GAME.load.image("BULLET", "assets/Bullet.png")
                GAME.load.image("ASTEROID_1", "assets/Asteroid_01.png")
                GAME.load.image("ASTEROID_2", "assets/Asteroid_02.png")
                GAME.load.image("ASTEROID_3", "assets/Asteroid_03.png")
                GAME.load.image("BACKGROUND", "assets/background.png")

            }
            
            function create() {
                game.renderer.clearBeforeRender = false;
                game.renderer.roundPixels = true;

                //  We need arcade physics
                game.physics.startSystem(Phaser.Physics.ARCADE);
                

                background = game.add.sprite(1280,720,'BACKGROUND');
                player = game.add.sprite(300, 300, 'SHIP');
                
            }
            
            function update() {
                 if (input.up.isDown) {
                    game.physics.arcade.accelerationFromRotation(player.rotation, 200, player.body.acceleration);
                }
                else {
                    player.body.acceleration.set(0);
                }
                if (input.left.isDown) {
                    player.body.angularVelocity = -300;
                }
                else if (input.right.isDown) {
                    player.body.angularVelocity = 300;
                } 
                else {
                    player.body.angularVelocity = 0;
                }

                screenWrap(player);
            }
            
            function render() {

            }
        </script>
    </body>
</html>